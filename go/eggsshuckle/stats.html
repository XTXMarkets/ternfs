{{define "body"}}
    <div>
        <p>
            The CDC stats include both the end-to-end latency (from request parse to response sent), which includes the time the request spent in the CDC transaction queue; and the "process" time (<code>.process</code>), which is how long it took to process the request from transaction start to transaction finish.
        </p>
        <p>
            For the shards there is no such queue (apart from the socket receive buffer itself, which we don't measure), but there are two sockets reading the requests, and they compete for the write lock. The time spent waiting for the write lock is measured here. Also note that for shards the ops/s measure the ops/s _per shard_. Multiply by 256 to get the cumulative ops/s.
        </p>
        <p>
            In shuckle requests might get blocked on the write lock, since we currently use SQLite, and that time is measured here.
        </p>
        <form id="time-selection" class="row row-cols-lg-auto g-3 align-items-center my-2">
            <div class="col">
                <label for="time-from" class="form-label">From</label>
            </div>
            <div class="col">
                <input id="time-from" type="datetime-local" class="form-control" required>
            </div>
            <div class="col">
                <label for="time-to" class="form-label">To</label>
            </div>
            <div class="col">
                <input id="time-to" type="datetime-local" class="form-control" required>
            </div>
            <div class="col">
                <button type="submit" class="btn btn-primary">Load</button>
            </div>
        </form>
        <div class="row row-cols-lg-auto g-3 align-items-center my-2"></form>
            <div class="col">
                <label for="stats-filter" class="form-label">Filter</label>
            </div>
            <div class="col">
                <input type="text" class="form-control" id="stats-filter" placeholder="regex">
            </div>
            <div class="col">
                <label for="sort-filter" class="form-label">Sort by</label>
            </div>
            <div class="col">
                <select id="sort-select" class="form-select"></select>
            </div>
            <div class="col form-check">
                <input class="form-check-input" type="checkbox" id="charts-check">
                <label class="form-check-label" for="charts-check">
                  Charts
                </label>
            </div>
        </div>
        <div id="charts"></div>
    </div>
    <script src="/static/chart-4.3.0.js"></script>
    <script type="module">
        import { stats } from '/static/scripts.js';
        stats();
    </script>
{{end}}
